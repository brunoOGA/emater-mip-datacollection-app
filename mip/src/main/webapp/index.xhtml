<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                template="/WEB-INF/templates/template.xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:hf="http://highfaces.org"
                xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:define name="title">
        Painel de Controle
    </ui:define>

    <ui:define name="description"></ui:define>

    <ui:define name="body">

        <p:spacer height="15px"/>

        <div class="row" >
            <div class="col-md-12">
                <div class="box box-solid box-info">
                    <div class="box-header with-border">
                        <h3 class="box-title">Quadro Resumo</h3>

                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                            </button>

                            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>

                    <div class="box-body" style="display: block;">
                        <div class="row">

                            <div class="col-md-12" >
                                <p class="text-center">
                                    <strong></strong>
                                </p>

                                <div>
                                    <p:dataTable paginatorPosition="bottom" id="summaryBoard" rowsPerPageTemplate="5,10,15" reflow="true" rows="5" paginator="true" var="anEntry" value="#{dashboardController.summaryBoardData}" >

                                        <p:column headerText="Nome" filterBy="#{anEntry.name}" filterMatchMode="contains" >
                                            <h:outputText value="#{anEntry.name}" />
                                        </p:column>         

                                        <p:column headerText="Município" filterBy="#{anEntry.cityName}" filterMatchMode="contains" >
                                            <h:outputText value="#{anEntry.cityName}" />
                                        </p:column>         


                                        <p:column headerText="Data da Emergência" filterBy="#{anEntry.emergenceDate}" filterMatchMode="contains" >
                                            <h:outputText value="#{anEntry.emergenceDate}" >
                                                <f:convertDateTime type="date" pattern="dd-MM-yyyy"/>
                                            </h:outputText>
                                        </p:column>         

                                        <p:column headerText="No. Amostras MIP" filterBy="#{anEntry.quantitySamplesMIP}" filterMatchMode="contains" >
                                            <h:outputText value="#{anEntry.quantitySamplesMIP}" />
                                        </p:column>         

                                        <p:column headerText="Data da 1a. Amostra" filterBy="#{anEntry.dateFirstSampleMIP}" filterMatchMode="contains" >
                                            <h:outputText value="#{anEntry.dateFirstSampleMIP}" >
                                                <f:convertDateTime type="date" pattern="dd-MM-yyyy"/>
                                            </h:outputText>                                                
                                        </p:column>         

                                        <p:column headerText="Data da última. Amostra" filterBy="#{anEntry.dateLastSampleMIP}" filterMatchMode="contains" >
                                            <h:outputText value="#{anEntry.dateLastSampleMIP}" >
                                                <f:convertDateTime type="date" pattern="dd-MM-yyyy"/>
                                            </h:outputText>
                                        </p:column>         

                                        <p:column headerText="No. Aplicações (Inseticida Total)" filterBy="#{anEntry.quantityApplicationsInseticidaMIP}" filterMatchMode="contains" >
                                            <h:outputText value="#{anEntry.quantityApplicationsInseticidaMIP}" />
                                        </p:column>         

                                        <p:column headerText="No. Aplicações (Inseticida Biológico Apenas)" filterBy="#{anEntry.quantityApplicationsInseticidaBiologicoMIP}" filterMatchMode="contains" >
                                            <h:outputText value="#{anEntry.quantityApplicationsInseticidaBiologicoMIP}" />
                                        </p:column>         
                                        
                                        <p:column headerText="No. Amostras MID" filterBy="#{anEntry.quantitySamplesMID}" filterMatchMode="contains" >
                                            <h:outputText value="#{anEntry.quantitySamplesMID}" />
                                        </p:column>         

                                        <p:column headerText="Presença Esporos" filterBy="#{anEntry.sporePresentMID}" filterMatchMode="contains" >
                                            <h:outputText value="#{anEntry.sporePresentMID  ? 'Sim' : 'Não' }" />
                                        </p:column>         

                                        <p:column headerText="Data da 1a. Amostra" filterBy="#{anEntry.dateFirstSampleMID}" filterMatchMode="contains" >
                                            <h:outputText value="#{anEntry.dateFirstSampleMID}" >
                                                <f:convertDateTime type="date" pattern="dd-MM-yyyy"/>
                                            </h:outputText>
                                        </p:column>         

                                        <p:column headerText="Data da última. Amostra" filterBy="#{anEntry.dateLastSampleMID}" filterMatchMode="contains" >
                                            <h:outputText value="#{anEntry.dateLastSampleMID}" >
                                                <f:convertDateTime type="date" pattern="dd-MM-yyyy"/>
                                            </h:outputText>
                                        </p:column>         

                                        <p:column headerText="No. Aplicações (Fungicida)" filterBy="#{anEntry.quantityApplicationsMID}" filterMatchMode="contains" >
                                            <h:outputText value="#{anEntry.quantityApplicationsMID}" />
                                        </p:column>      

                                        <f:facet name="footer">
                                            #{fn:length(dashboardController.summaryBoardData)} Ocorrências foram encontradas.
                                        </f:facet>

                                    </p:dataTable>   
                                </div>

                            </div>

                        </div>

                    </div>

                </div>

            </div>

        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="box box-solid box-default">
                    <div class="box-header with-border">
                        <h3 class="box-title">Selecione a opção para visualizar os gráficos</h3>
                    </div>

                    <div class="box-body" style="display: block;">
                        <div class="row">

                            <div class="col-md-12">

                                <h:form>
                                    <div class="col-md-3">
                                        <p:outputLabel for="@next" value="Macrorregião" />
                                        <p:selectOneMenu value="#{dashboardController.selectedMacroRegionId}"  filter="true" filterMatchMode="contains">
                                            <p:ajax listener="#{dashboardController.onMacroRegionSelectionChangeEvent()}" update="regionSelectComponent caterpillarFluctuationChart bedBugFluctuationChart defoliationChart predatorChart" />
                                            <f:selectItem itemLabel="Todas" itemValue="${null}" noSelectionOption="true" />
                                            <f:selectItems value="#{dashboardController.macroRegionsAvailable}" var="macroRegion" itemLabel="#{macroRegion.name}" itemValue="#{macroRegion.id}" />
                                        </p:selectOneMenu>
                                        <p:message for="@previous" ></p:message>
                                    </div>

                                    <div class="col-md-3">
                                        <p:outputLabel for="@next" value="Região" />
                                        <p:selectOneMenu id="regionSelectComponent" value="#{dashboardController.selectedRegionId}" filter="true" filterMatchMode="contains" >
                                            <p:ajax listener="#{dashboardController.onRegionSelectionChangeEvent()}" update="citySelectComponent caterpillarFluctuationChart bedBugFluctuationChart defoliationChart predatorChart" />
                                            <f:selectItem itemLabel="Todas" itemValue="${null}" noSelectionOption="true" />
                                            <f:selectItems value="#{dashboardController.regionsAvailable}" var="region" itemLabel="#{region.name}" itemValue="#{region.id}" />
                                        </p:selectOneMenu>
                                        <p:message for="@previous" ></p:message>
                                    </div>

                                    <div class="col-md-3">
                                        <p:outputLabel for="@next" value="Município" />
                                        <p:selectOneMenu id="citySelectComponent" value="#{dashboardController.selectedCityId}" filter="true" filterMatchMode="contains" >
                                            <p:ajax listener="#{dashboardController.onCitySelectionChangeEvent()}" update="urSelectComponent caterpillarFluctuationChart bedBugFluctuationChart defoliationChart predatorChart" />
                                            <f:selectItem itemLabel="Todos" itemValue="${null}" noSelectionOption="true" />
                                            <f:selectItems value="#{dashboardController.citiesAvailable}" var="city" itemLabel="#{city.name}" itemValue="#{city.id}" />
                                        </p:selectOneMenu>
                                        <p:message for="@previous" ></p:message>
                                    </div>

                                    <div class="col-md-3">
                                        <p:outputLabel for="@next" value="UR" />
                                        <p:selectOneMenu id="urSelectComponent" value="#{dashboardController.selectedURId}" filter="true" filterMatchMode="contains">
                                            <p:ajax listener="#{dashboardController.onURSelectionChangeEvent()}" update="caterpillarFluctuationChart bedBugFluctuationChart defoliationChart predatorChart" />
                                            <f:selectItem itemLabel="Todas" itemValue="${null}" noSelectionOption="true" />
                                            <f:selectItems value="#{dashboardController.URsAvailable}" var="ur" itemLabel="#{ur.name}" itemValue="#{ur.id}" />
                                        </p:selectOneMenu>
                                        <p:message for="@previous" ></p:message>
                                    </div>

                                </h:form>

                            </div>

                        </div>

                    </div>

                </div>

            </div>

        </div>


        <div class="row" >
            <div class="col-md-12">
                <div class="box box-solid box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title">Evolução da Flutuação de Lagartas</h3>

                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                            </button>

                            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>

                    <div class="box-body" style="display: block;">
                        <div class="row">

                            <div class="col-md-12" >
                                <p class="text-center">
                                    <!--<strong>#{dashboardController.title}</strong>-->
                                </p>

                                <div>
                                    <hf:chart id="caterpillarFluctuationChart" type="line" value="#{dashboardController.caterpillarFluctuationChart}" var="daeOccurrences" point="#{daeOccurrences.occurrence}" tickLabel="#{daeOccurrences.dae}" xaxisLabel="Dias Após Emergência" yaxisLabel="No. Insetos/Metro" title="#{dashboardController.title}" ></hf:chart>
                                </div>

                            </div>

                        </div>

                    </div>

                </div>

            </div>

        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="box box-solid box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">Evolução da Flutuação de Percevejos</h3>

                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                            </button>

                            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>

                    <div class="box-body" style="display: block;">
                        <div class="row">

                            <div class="col-md-12">
                                <p class="text-center">
                                    <!--<strong>#{dashboardController.title}</strong>-->
                                </p>

                                <div>
                                    <hf:chart id="bedBugFluctuationChart" type="line" value="#{dashboardController.bedBugFluctuationChart}" var="daeOccurrences" point="#{daeOccurrences.occurrence}" tickLabel="#{daeOccurrences.dae}" xaxisLabel="Dias Após Emergência" yaxisLabel="No. Insetos/Metro" title="#{dashboardController.title}" ></hf:chart>
                                </div>

                            </div>

                        </div>

                    </div>

                </div>

            </div>

        </div>


        <div class="row">
            <div class="col-md-12">
                <div class="box box-solid box-danger">
                    <div class="box-header with-border">
                        <h3 class="box-title">Evolução da Flutuação de Inimigos Naturais</h3>

                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                            </button>

                            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>

                    <div class="box-body" style="display: block;">
                        <div class="row">

                            <div class="col-md-12">
                                <p class="text-center">
                                    <!--<strong>#{dashboardController.title}</strong>-->
                                </p>

                                <div>
                                    <hf:chart id="predatorChart" type="line" value="#{dashboardController.predatorChart}" var="daeOccurrences" point="#{daeOccurrences.occurrence}" tickLabel="#{daeOccurrences.dae}" xaxisLabel="Dias Após Emergência" yaxisLabel="No. Insetos/Metro" title="#{dashboardController.title}" ></hf:chart>
                                </div>

                            </div>

                        </div>

                    </div>

                </div>

            </div>

        </div>



        <div class="row">
            <div class="col-md-12">
                <div class="box box-solid box-warning">
                    <div class="box-header with-border">
                        <h3 class="box-title">Evolução da Desfolha</h3>

                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                            </button>

                            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>

                    <div class="box-body" style="display: block;">
                        <div class="row">

                            <div class="col-md-12">
                                <p class="text-center">
                                    <!--<strong>#{dashboardController.title}</strong>-->
                                </p>

                                <div>
                                    <hf:chart id="defoliationChart" type="line" value="#{dashboardController.defoliationChart}" var="daeOccurrences" point="#{daeOccurrences.occurrence}" tickLabel="#{daeOccurrences.dae}" xaxisLabel="Dias Após Emergência" yaxisLabel="(%) de Desfolha" title="#{dashboardController.title}" ></hf:chart>
                                </div>

                            </div>

                        </div>

                    </div>

                </div>

            </div>

        </div>


    </ui:define>

</ui:composition>